{% extends 'base.html' %}
 {% load static %}
 
 {% block title %}Home / X{% endblock%}
 {% block content %}
<div class="flex-container">
  <div class="sidenav">
    <img class="dashboard-logo" src="{% static '/images/logo.svg' %}" alt="" />
    <li>
      <a href="/dashboard"><i class="fas fa-home"></i> <span>Home</span></a>
    </li>
    <li>
      <a href="/explore"><i class="fas fa-search"></i> <span>Explore</span></a>
    </li>
    <li>
      <a href="/notifications"
        ><i class="fas fa-bell"></i> <span>Notifications</span></a
      >
    </li>
    <li>
      <a href="/messages"
        ><i class="fas fa-envelope"></i> <span>Messages</span></a
      >
    </li>
    <li>
      <a href="/profile"><i class="fas fa-user"></i> <span>Profile</span></a>
    </li>
    {% if user.is_authenticated %}
  <form id="logout-form" action="{% url 'logout' %}" method="POST">
    {% if request.user.profile.profile_pic %}
    <h4>Welcome back, @{{ request.user.profile.user }}!</h4>
    <img class="profile-pic-btn" src="{{ request.user.profile.profile_pic.url }}" alt="Profile Picture">
    {% endif %}
    {% csrf_token %}
    <button type="submit" class="logout-btn">Log out</button>
</form>
{% endif %}
  </div>
  <div class="middle-sect">
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link-fy" aria-current="page" href="#">For You</a>
            </li>
            <li class="nav-item">
              <a class="nav-link-f" href="#">Following</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="tweet-container">
      {% if form %}
      <form method="POST" class="form-with-profile-pic" id="tweet-form" width="80%">
        {% csrf_token %}
        <div class="form-group">
          {% if request.user.profile.profile_pic %}
          <img class="profile-pic-form" src="{{ request.user.profile.profile_pic.url }}" alt="Profile Picture">
          {% else %}
          <img class="profile-pic-t" src="{% static 'images/egg.png' %}" alt="Default Profile Picture">
          {% endif %}
          {{ form.body.label_tag }}
          <textarea id="tweet-body" class="form-control tweet-input" name="body" rows="1" placeholder="What's happening?" style="width: 70%; background-color: black;"></textarea>
          {{ form.body.errors }} <!-- Display field errors if any -->
          <span class="tweet-icons">
            <i class="fas fa-image"></i>
            <i class="fas fa-list"></i>
            <i class="fas fa-smile"></i>
            <i class="fas fa-map-marker-alt"></i>
            <button type="submit" class="btn btn-secondary">Post</button>
          </span>
        </div>
      </form>
      {% endif %}
    </div>
    
  
    {% for tweet in tweets %}
    <div class="other-tweets">
      <span class="user-info">
          {% for profile in profiles %}
          {% if profile.user == tweet.user %}
          {% if profile.profile_pic %}
          <img class="profile-pic-t" src="{{ tweet.user.profile.profile_pic.url }}" alt="Profile Picture">
          {% else %}
          <img class="profile-pic-t" src="{% static 'images/egg.png' %}" alt="Default Profile Picture">
          {% endif %}
          {% endif %}
          {% endfor %}
          <span class="real-name">{{ tweet.user.first_name }} {{ tweet.user.last_name }}</span>
          <span class="user-name">@{{ tweet.user }}</span>
          <span class="time-posted">{{ tweet.created_at | date:"H:i  M d, Y"}}</span>
          <br>
      <span class="users-tweet">{{ tweet.body | safe }}</span>
      <br>
      <span class="other-tweets-icons">
      <i class="far fa-comment"></i>
      <i class="fas fa-retweet"></i>
      <i class="far fa-heart"></i>
      <i class="fas fa-chart-bar"></i>
      <i class="far fa-bookmark"></i>
      <i class="fas fa-share-square"></i>
    </span>
  </div>
    {% endfor %}
  </div>
</div>
<div class="third-sect">
  
  <nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container-fluid">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0"> 
          
          </li>
        </ul>
        <form class="search">
          <i class="fas fa-search"></i>
          <input type="text" class="search-query" placeholder="Search" />
        </form> 
      </div>
    </div>
  </nav>
  <div class="subscribe">
    <h2 id="SUBCRIBE">Subscribe to premium</h2>
    <p>Subscribe to unlock new features and if eligible, receive a share of ads revenue.</p>
    <button class="subscribe-btn" type="submit">Subscribe</button>
  </div>

  <div class="wh-box"> 
        <h2>What's Happening</h2>
        <strong>Paris Fashion Week Fall 2024</strong>
        <p>Fashion <span>&#8226;</span> LIVE</p>
        <p>Sports <span>&#8226;</span> Trending</p>
        <strong>#LEAFS</strong>
        <p>21.4k Posts</p>
  </div>
  

</div>
<script src="{% static '/js/dashboard.js' %}"></script>
{% endblock %}



