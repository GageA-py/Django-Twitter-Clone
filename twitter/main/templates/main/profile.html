
{% extends 'base.html' %}
{% load static %}
{% block title %} Profile {{user.username}} {% endblock %}

{% block content %}

{% if profile %}
<div class="flex-container">
  <div class="sidenav">
    <img class="dashboard-logo" src="{% static '/images/logo.svg' %}" alt="" />
    <li>
      <a href="/dashboard"><i class="fas fa-home"></i> <span>Home</span></a>
    </li>
    <li>
      <a href="/explore"><i class="fas fa-search"></i> <span>Explore</span></a>
    </li>
    <li>
      <a href="/notifications"
        ><i class="fas fa-bell"></i> <span>Notifications</span></a
      >
    </li>
    <li>
      <a href="/messages"
        ><i class="fas fa-envelope"></i> <span>Messages</span></a
      >
    </li>
    <li>
      <a href="/profile"><i class="fas fa-user"></i> <span>Profile</span></a>
    </li>
    {% if user.is_authenticated %}
  <form id="logout-form" action="{% url 'logout' %}" method="POST">
    {% csrf_token %}
    <button type="submit" class="logout-btn">Log out</button>
</form>
{% endif %}
  </div>
  <div class="middle-sect">
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
      <div class="container-fluid">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            {% if user.is_authenticated %}
            <li class="nav-item">
              <h1 class="profile-user">
                {{profile.user.username}}'s Profile
              </h1>

          </ul>
        </div>
      </div>
    </nav>
    <div class="tweet-container">
    {% if form %}
    <form method="POST" class="form-with-profile-pic" id="tweet-form" width="80%">
      {% csrf_token %}
      <div class="form-group">
        <img class="profile-pic-form" src="{{ request.user.profile.profile_pic.url }}" alt="Profile Picture">
        {{ form.body.label_tag }}
        <textarea id="tweet-body" class="form-control tweet-input" name="body" rows="1" placeholder="What's happening?" style="width: 70%; background-color: black;"></textarea>
        {{ form.body.errors }} <!-- Display field errors if any -->
        <span class="tweet-icons">
          <i class="fas fa-image"></i>
          <i class="fas fa-list"></i>
          <i class="fas fa-smile"></i>
          <i class="fas fa-map-marker-alt"></i>
          <button type="submit" class="btn btn-secondary">Post</button>
        </span>
        
      </div> 
    </form>
  </div>
    {% endif %}
    {% for tweet in tweets %}
    <div class="other-tweets">
      <span class="user-info">
         
      <br>
      <span class="other-tweets-icons">
      <i class="far fa-comment"></i>
      <i class="fas fa-retweet"></i>
      <i class="far fa-heart"></i>
      <i class="fas fa-chart-bar"></i>
      <i class="far fa-bookmark"></i>
      <i class="fas fa-share-square"></i>
    </span>
  </div>
    {% endfor %}
  </div>
</div>
<div class="third-sect">
  
  <nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container-fluid">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0"> 
          
          </li>
        </ul>
        <form class="search">
          <i class="fas fa-search"></i>
          <input type="text" class="search-query" placeholder="Search" />
        </form> 
      </div>
    </div>
  </nav>
  <div class="following-box">
    <strong>Following:</strong><br>
              {% for following in profile.follows.all %}
              <a href="{% url 'profile' following.user.id %}">
                    @{{ following }}</a><br>
                {% endfor %}

                <br><br>
  </div>

  <div class="followed-by"> 
        <strong>Followed By:</strong><br>
        {% for following in profile.followed_by.all%}
        <a href="{% url 'profile' following.user.id %}">
          @{{ following }}</a><br>
        {% endfor %}
        
      </li>
      {% endif %}
  </div>
  

</div>
<script src="{% static '/js/dashboard.js' %}"></script>

{% endif %}
{% endblock %}